html,
body {
    height: 100%;
    overflow: hidden;
}

/* Ensure the right-panel-top fills its space and uses flex column */
#right-panel-top {
    display: flex;
    flex-direction: column;
    flex-grow: 1; /* Ensure it grows vertically within #right-panel */
    min-height: 0; /* Allow it to shrink */
}

/* This is the div that contains #canvas-container */
/* It needs to grow and center its content */
#right-panel-top > .flex-grow-1 {
    display: flex;
    justify-content: center; /* Center #canvas-container horizontally */
    align-items: center;   /* Center #canvas-container vertically */
    flex-grow: 1; /* Ensure it takes available space */
    min-height: 0; /* Important for flex items to shrink */
    /* Removed explicit height: 100%; to allow aspect-ratio to work without conflict */
}


#canvas-container {
    position: relative;
    cursor: default;
    border: 1px solid var(--bs-secondary); /* Keep border for visibility */

    /* Key changes: Use max-width and max-height to constrain within parent */
    max-width: 100%;
    max-height: 100%;
    width: auto; /* Allow width to be determined by content or max-width */
    height: auto; /* Allow height to be determined by content or max-height */
    aspect-ratio: 1280 / 800; /* This maintains the aspect ratio */

    /* Removed display: flex; justify-content; align-items; from here, as its parent now centers it. */
}

#signalCanvas {
    display: block; /* Prevent margin issues */
    /* Removed fixed width and height from here as well */
    width: 100%; /* Make canvas fill its container */
    height: 100%; /* Make canvas fill its container */
    /* Removed max-width and max-height as it's already 100% of its container */
}

.legend-button {
    background: none;
    border: none;
    color: inherit;
    padding: 0;
    width: 100%;
    text-align: left;
    transition: color 0.2s ease;
}

.legend-button:not(.collapsed)::after {
    transform: rotate(-180deg);
}

.legend-button::after {
    content: '\f282';
    font-family: 'bootstrap-icons';
    display: inline-block;
    transition: transform 0.2s ease-in-out;
    float: right;
}

.object-name:focus {
    outline: none;
    box-shadow: 0 0 0 2px var(--bs-primary);
}

.gutter {
    background-color: var(--bs-tertiary-bg);
    transition: background-color 0.2s ease-in-out;
    display: flex;
    align-items: center;
    justify-content: center;
}

.gutter:hover {
    background-color: var(--bs-primary);
}

.gutter i {
    color: var(--bs-secondary-color);
    font-size: 1.25rem;
    transition: color 0.2s ease-in-out;
}

.gutter:hover i {
    color: var(--bs-light);
}

.gutter.gutter-horizontal {
    cursor: ew-resize;
}

.gutter.gutter-vertical {
    cursor: ns-resize;
}

#main-split {
    display: flex;
    flex-direction: row;
}

.editable-name-area {
    padding: 2px 6px;
    border-radius: 5px;
    transition: background-color 0.2s ease-in-out;
}

.editable-name-area:hover {
    cursor: text;
    background-color: var(--bs-tertiary-bg);
}

.editable-name-area .bi-pencil-fill {
    opacity: 0.5;
    transition: opacity 0.2s ease-in-out;
}

.editable-name-area:hover .bi-pencil-fill {
    opacity: 1;
}

.form-range::-webkit-slider-runnable-track {
    background-color: var(--bs-border-color);
}

.form-range::-moz-range-track {
    background-color: var(--bs-border-color);
}
